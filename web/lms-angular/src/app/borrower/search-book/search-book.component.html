<div class= "container marketing">
  <h3>
    Book Services
    <div class="ds-l-row ds-u-margin-top--3">
      Search:
      <input type="text" [(ngModel)]="searchInput" name="searchInput"/>
      <button class="btn btn-secondary" (click)=search(searchInput) role="button">Search</button>
    </div>
  </h3>
  <table class="table table-dark">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col" sortable="title" (sort)="onSort($event)">Title</th>
        <th scope="col" sortable="author" (sort)="onSort($event)">Author(s)</th>
        <th scope="col">Available in: </th>
        <th scope="col">Reserve</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let book of pagedBooks; let i = index">
        <th scope="row">{{i + 1}}</th>
        <td>
          {{book.title}}
        </td>
        <td>
          <span *ngFor="let a of book.authors; let j = index">
            <p *ngIf="book.authors.length > 1 && j != book.authors.length">{{a.name}},</p>
            <p *ngIf="book.authors.length > 1 && j == book.authors.length-1">{{a.name}}</p>
            <p *ngIf="book.authors.length == 1">{{a.name}}</p>
          </span>
        </td>
        <td>
          <span *ngIf="book.bookCopies.length > 0; then thenBlock else elseBlock"></span>
          <ng-template #thenBlock>
            <span *ngFor="let bc of book.bookCopies; let j = index">
              <p *ngIf="book.bookCopies.length > 1 && j != book.bookCopies.length">{{bc.branch.name}},</p>
              <p *ngIf="book.bookCopies.length > 1 && j == book.bookCopies.length-1">{{bc.branch.name}}</p>
              <p *ngIf="book.bookCopies.length == 1">{{bc.branch.name}}</p>
            </span>
          </ng-template>
          <ng-template #elseBlock>
            Not Available
          </ng-template>
        </td>
        <td>
          Test Rent
        </td>
      </tr>
    </tbody>
  </table>
  <div class="ds-l-row ds-u-margin-top--3">
    <div class="ds-l-col--9">
      <ngb-pagination
        [collectionSize]="totalBooks"
        [(page)]="pager.currentPage"
        [maxSize]="5"
        [boundaryLinks]="true"
        (pageChange)="setPage($event)"
      ></ngb-pagination>
    </div>
  </div>
</div>